#!{{ lookPath "fish" }}

# vim:ft=fish

set CHEZMOI_SOURCE_DIR (chezmoi source-path)
source "$CHEZMOI_SOURCE_DIR/.chezmoiscripts/.00_helpers.fish"

function activity_monitor
    sub_task "Activity Monitor"

    # Show the main window when launching Activity Monitor
    defaults write com.apple.ActivityMonitor OpenMainWindow -bool true

    # Show all processes in Activity Monitor
    defaults write com.apple.ActivityMonitor ShowCategory -int 0

    # Sort Activity Monitor results by CPU usage
    defaults write com.apple.ActivityMonitor SortColumn -string CPUUsage
    defaults write com.apple.ActivityMonitor SortDirection -int 0
end

if is_macos
    # Close any open System Preferences panes, to prevent them from overriding settings weâ€™re about to change
    command osascript -e 'tell application "System Preferences" to quit' >/dev/null 2>&1

    activity_monitor
end
