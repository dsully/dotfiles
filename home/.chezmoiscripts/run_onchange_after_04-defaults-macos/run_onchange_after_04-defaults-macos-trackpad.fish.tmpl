#!{{ lookPath "fish" }}

# vim:ft=fish

set CHEZMOI_SOURCE_DIR (chezmoi source-path)
source "$CHEZMOI_SOURCE_DIR/.chezmoiscripts/.00_helpers.fish"

function trackpad
    sub_task Trackpad

    # Enable tap to click for this user and for the login screen
    defaults write com.apple.AppleMultitouchTrackpad Clicking -bool true
    defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true
    defaults write NSGlobalDomain com.apple.mouse.tapBehavior -int 1
    defaults -currentHost write NSGlobalDomain com.apple.mouse.tapBehavior -int 1

    killall cfprefsd SystemUIServer >/dev/null 2>&1
end

if is_macos
    # Close any open System Preferences panes, to prevent them from overriding settings weâ€™re about to change
    command osascript -e 'tell application "System Preferences" to quit' >/dev/null 2>&1

    trackpad
end
